<?xml version="1.0"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<pe:importConstants className="java.util.Collections" var="collectionsConstants" />

	<ui:param name="taskList" value="#{timesheetTask.getTasksByDay(day)}" />

	<p:accordionPanel dynamic="true">

		<!-- Iterate the tasks -->
		<c:if test="#{taskList} != collectionsConstants.EMPTY_LIST">
			<c:forEach items="#{taskList}" var="task">
	
				<!-- Print out the header of the main LPS  -->
				<p:tab id="#{task.id}" title="#{task.name}">
					<c:forEach items="#{task.segments}" var="segment">
	
						<!-- Iterate the segments in a task -->
						<p:tab id="#{segment.id + _tab}" title="#{segment.name}">
							<h:outputText id="#{segment.id + _txt}" value="#{segment.description}" />
						</p:tab>
					</c:forEach>
				</p:tab>
			</c:forEach>
		</c:if>
	</p:accordionPanel>

</ui:composition>